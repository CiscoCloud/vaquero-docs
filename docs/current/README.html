<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
Vaquero README
</title>
<link rel="stylesheet" type="text/css" href="../doc.css"> <link rel='shortcut icon' href='cow.png' type='image/x-icon'/ > <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400">
<style>
                .markdown-body {
                    box-sizing: border-box;
                    min-width: 200px;
                    max-width: 1100px;
                    margin: 0 auto;
                    padding: 45px;
                }
            </style>
</head>
<article class="markdown-body">
<div data-align="center">
<img src="cow.png" alt="Drawing" style="width: 200px;"/>
<p style="font-size:60px">
vaquero
</p>
<p><a href="https://ciscocloud.github.io/vaquero-docs/">Home</a> | <a href="https://github.com/CiscoCloud/vaquero">Dev Repo</a> | <a href="https://github.com/CiscoCloud/vaquero-docs/tree/master">Docs Repo</a> | <a href="requirements.html">Project Requirements</a> | <a href="https://waffle.io/CiscoCloud/vaquero">Issue Tracking</a></p>
</div>
<h1>
</h1>
<p>A bare metal configuration utility that network boots machines based on user defined templates. We leverage iPXE and support cloud-config, ignition, kickstart, and untyped unattend boot scripts.</p>
<p>The only thing you need pre-installed to run Vaquero is <a href="https://www.docker.com/">Docker</a>.</p>
<p>See the <a href="getting-started.html">Getting Started</a> page for details on deploying Vaquero in virtualbox.</p>
<h2 id="features-updated-feb.-2017">Features (updated Feb. 2017)</h2>
<p><strong>Operations / Deployment</strong>:</p>
<ul>
<li>Operational simplicity: Vaquero is deployed from a single container that can run in server, agent, and standalone modes.</li>
<li>Centralized control plane: Vaquero server is designed for high availability and linear scalability</li>
<li>Site local vaquero agents are stateless and can be created and destroyed at will.</li>
<li>Safe to run in a multi-tenant environment: Vaquero DHCP will only respond to known hosts in its data model.</li>
<li>Vaquero agent implements a DHCP server that can run in proxy mode or full DHCP mode, with support for DHCP relay.</li>
<li>Support for Vaquero agent multihoming.</li>
<li>Built-in authoritative detector notifies operator if an “authoritative” DHCP server is in the same broadcast domain.</li>
<li>Vaquero servers act as state machines, and are able to migrate the desired host state within the data model over to the physical host</li>
<li>Vaquero servers able to handle failure states in boot process, will retry, halt, or revert based on user policy.</li>
<li>High availability for Vaquero servers - seamless leader election via CoreOS Etcd</li>
<li>Kubernetes integration for HA via readiness probe</li>
</ul>
<p><strong>Booting</strong></p>
<ul>
<li>Hardware-agnostic bare metal management with pxe and IPXE-based network booting.</li>
<li>Support and validation for kickstart, cloud-config, ignition, and custom unattended boot scripts</li>
<li>Vaquero agent support for serving local files over http, or for acting as a reverse proxy for a CDN</li>
<li>Supports BIOS and uEFI PXE booting</li>
</ul>
<p><strong><a href="tools.html">Tooling</a></strong></p>
<ul>
<li>Command-line migrate tool for transferring stored information of SoTs and sites</li>
<li>Command-line preview tool for iPXE/unattended boot scripts, before sending to hosts</li>
<li>Command-line validator for checking your data model before you push it through Vaquero</li>
<li>Robust Vagrant environment to test single-node deployments, or Vaquero server cluster and multiple agent deployments.</li>
</ul>
<h1 id="architecture"><a href="architecture.html">Architecture</a></h1>
<p><img src="jan17Arch.png" /></p>
<h2 id="data-model-templates"><a href="data-model-howto.html">Data Model Templates</a></h2>
<p>Data Models are used by Vaquero as the “Source of Truth” to describe your data center. Data Models define machine operating systems, subnets, and boot scripts. We provide some <a href="https://github.com/CiscoCloud/vaquero-examples">example data models</a> as a reference to build your own.</p>
<p>Two notable branches in the example repo:</p>
<ul>
<li><p><a href="https://github.com/CiscoCloud/vaquero-examples"><code>master</code></a>: This will be updated to reflect a complete data model for reference. We will keep this single branch updated when an example of every supported feature, model type, and workflow is up. The master branch will be configured to run on localhost.</p></li>
<li><p><a href="https://github.com/CiscoCloud/vaquero-examples/tree/vagrant"><code>vagrant</code></a>: Used for small deployments via vagrant in virtualbox. This branch may not show every feature, but it will be leveraged as a small scale example Data Model to deploy a few machines at most. This branch will contain a data model that will include definitions for the demos. See the <a href="getting-started.html">Getting Started</a> page for for more info about the demos.</p></li>
</ul>
<h2 id="configuring-and-running-vaquero">Configuring and Running Vaquero</h2>
<p>Vaquero can run in multiple modes: <code>server</code>, <code>agent</code>, and <code>standalone</code>. “Standalone” refers to running server and agent in the same container. A standalone configuration file, combining information needed to run both agent and server, is shown below.</p>
<p>See the <a href="architecture.html">architecture page</a> for more details about server and agent.</p>
<hr />
<p><strong>sample-standalone-config.yaml:</strong></p>
<pre><code>UserApi:
  Addr: &quot;127.0.0.1&quot;
  Port: 24604
ServerClient:
  Addr: &quot;127.0.0.1&quot;
  Port: 24601
  InsecureSkipVerify: true
ServerAPI:
  Addr: &quot;127.0.0.1&quot;
  Port: 24601
  PrivateKey: &quot;functional/test/server.key&quot;
  PublicKey: &quot;functional/test/server.pem&quot;
SavePath: &quot;/var/vaquero&quot;
Gitter:
  Endpoint: &quot;/postreceive&quot;
  Timeout: 2
  Addr: &quot;127.0.0.1&quot;
  Port: 24603
GitHook:
  - ID: &quot;vaquero-git&quot;
    Token: &lt;token&gt;
    URL: &quot;https://github.com/CiscoCloud/vaquero-examples&quot;
    Secret: supersecretcode
LocalDir:
  PollInterval: 2
SoT:
- Local:
    ID: &quot;vaquero-local&quot;
    Root: examples/etcd-cluster
- Git:
    HookID: &quot;vaquero-git&quot;
    ID: &quot;vaquero-test&quot;
    Branch: master
Log:
  Level: info
  Location: stdout
  LogType: text
Etcd:
  Root: &quot;vaquero1&quot;
  Endpoints:
  - &quot;http://127.0.0.1:2379&quot;
  Timeout: 5
  Retry: 3
  HA: true</code></pre>
<hr />
<h3 id="configuration-fields-overview">Configuration Fields Overview</h3>
<ul>
<li><code>ServerClient</code>: Configuration for vaquero-agent’s ServerAPI client.</li>
<li><code>ServerAPI</code>: The vaquero-server api, used by vaquero agents.</li>
<li><code>SavePath</code>: The Vaquero server location to save local configurations on disk.</li>
<li><code>Gitter</code>: Configuration for listening to git webhooks.</li>
<li><code>GitHook</code>: An array for all githooks to listen to.</li>
<li><code>SoT:</code> An array for specific sources of truth. Git updater receives webhooks from github. Local: will use a local directory to update.</li>
<li><code>Etcd</code>: The necessary information to connect a vaquero server cluster or High Availability (HA) cluster to a running <a href="https://coreos.com/etcd/">CoreOS Etcd</a> cluster. If Etcd information is provided, Vaquero will use the provided cluster endpoints (vs. a local filestorage) to store and continuously update data model information, as well as internal, vaquero-specific information (eg. machine state). See the <a href="https://ciscocloud.github.io/vaquero-docs/docs/current/getting-started.html">Getting Started page</a>, under “Etcd and Vaquero,” for more information, including a short demo using a virtual machine running Etcd.</li>
<li><code>SavePath</code>: If no Etcd details provided, the local dir where Vaquero servers and agents will save local configurations, as well as internal information (eg. machine state) needed for Vaquero to run.</li>
<li><code>DHCPMode</code>:Using “server” runs Vaquero as a DHCP server. Vaquero does not manage free address pools or leases; it simply assigns based of the static configuration defined in the data model. <strong>Note that DHCPMode defaults to server.</strong> Using “proxy” enables ProxyDHCP. ProxyDHCP works with an existing DHCP Server to provide PXEBoot functionality, while leaving the managing and assigning of IP addresses to the other DHCP Server. Only enable this if you already have a DHCP server with entries for all the hosts in your Data Model.</li>
</ul>
<h3 id="configuration-fields-in-detail">Configuration Fields In Detail</h3>
<p>(Fields indicated as “Agent” and “Server” are by default included in Standalone mode. Forward-slashes in field names indicate YAML hierarchy)</p>
<table style="width:100%;">
<colgroup>
<col style="width: 6%" />
<col style="width: 25%" />
<col style="width: 13%" />
<col style="width: 45%" />
<col style="width: 10%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Mode</th>
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Required?</th>
<th style="text-align: left;">Description</th>
<th style="text-align: left;">Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">All</td>
<td style="text-align: left;">Log/Level</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">Minimum Logging Level (debug, info, warning, error, fatal, panic)</td>
<td style="text-align: left;">info</td>
</tr>
<tr class="even">
<td style="text-align: left;">All</td>
<td style="text-align: left;">Log/Location</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">Place to log: (stdout, stderr, <code>filename</code>)</td>
<td style="text-align: left;">stdout</td>
</tr>
<tr class="odd">
<td style="text-align: left;">All</td>
<td style="text-align: left;">Log/Type</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">Text / JSON output (text/json)</td>
<td style="text-align: left;">text</td>
</tr>
<tr class="even">
<td style="text-align: left;">All</td>
<td style="text-align: left;">SavePath</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">Base folder for vaquero save files</td>
<td style="text-align: left;">/var/vaquero</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Agent</td>
<td style="text-align: left;">ServerClient/Addr</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">IP Address of vaquero-server’s API.</td>
<td style="text-align: left;">127.0.0.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Agent</td>
<td style="text-align: left;">ServerClient/Port</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">Port of vaquero-server’s API</td>
<td style="text-align: left;">24601</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Agent</td>
<td style="text-align: left;">ServerClient/<br>InsecureSkipVerify</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">vaquero-agent should allow a self-signed server certificate.</td>
<td style="text-align: left;">false</td>
</tr>
<tr class="even">
<td style="text-align: left;">Server</td>
<td style="text-align: left;">ServerAPI/Addr</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">The IP Address to serve the server REST API on</td>
<td style="text-align: left;">127.0.0.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Server</td>
<td style="text-align: left;">ServerAPI/Port</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">The port to serve the server REST API on</td>
<td style="text-align: left;">24601</td>
</tr>
<tr class="even">
<td style="text-align: left;">Server</td>
<td style="text-align: left;">ServerAPI/PrivateKey</td>
<td style="text-align: left;">yes</td>
<td style="text-align: left;">vaquero-server HTTPS/TLS Private Key</td>
<td style="text-align: left;">none</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Server</td>
<td style="text-align: left;">ServerAPI/PublicKey</td>
<td style="text-align: left;">yes</td>
<td style="text-align: left;">vaquero-server HTTPS/TLS Public Key</td>
<td style="text-align: left;">none</td>
</tr>
<tr class="even">
<td style="text-align: left;">Server</td>
<td style="text-align: left;">Etcd/Endpoints</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">etcd initial cluster endpoints: format- e1,e2,e3</td>
<td style="text-align: left;">none</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Server</td>
<td style="text-align: left;">Etcd/Retry</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">number of retries for etcd operations</td>
<td style="text-align: left;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">Server</td>
<td style="text-align: left;">Etcd/Timeout</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">etcd dial and request timeout, in seconds</td>
<td style="text-align: left;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Server</td>
<td style="text-align: left;">Etcd/Root</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">unique etcd storage key prefix for this VS runtime</td>
<td style="text-align: left;">vaqueroServer</td>
</tr>
<tr class="even">
<td style="text-align: left;">Server</td>
<td style="text-align: left;">Etcd/HA</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">high availability - whether to engage vaquero server in etcd leader election</td>
<td style="text-align: left;">false</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Server</td>
<td style="text-align: left;">Gitter/Endpoint</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">githook endpoint to receive webhooks</td>
<td style="text-align: left;">/postreceive</td>
</tr>
<tr class="even">
<td style="text-align: left;">Server</td>
<td style="text-align: left;">Gitter/Address</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">githook listening address</td>
<td style="text-align: left;">127.0.0.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Server</td>
<td style="text-align: left;">Gitter/Port</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">githook listening port</td>
<td style="text-align: left;">24603</td>
</tr>
<tr class="even">
<td style="text-align: left;">Server</td>
<td style="text-align: left;">Gitter/Timeout</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">githook timeout, in seconds</td>
<td style="text-align: left;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Server</td>
<td style="text-align: left;">GitHook/ID</td>
<td style="text-align: left;">yes, if git SOT</td>
<td style="text-align: left;">githook ID</td>
<td style="text-align: left;">none</td>
</tr>
<tr class="even">
<td style="text-align: left;">Server</td>
<td style="text-align: left;">GitHook/Token</td>
<td style="text-align: left;">yes, if git SOT</td>
<td style="text-align: left;">hook token, generated on github/settings</td>
<td style="text-align: left;">none</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Server</td>
<td style="text-align: left;">GitHook/URL</td>
<td style="text-align: left;">yes, if git SOT</td>
<td style="text-align: left;">url for githook</td>
<td style="text-align: left;">none</td>
</tr>
<tr class="even">
<td style="text-align: left;">Server</td>
<td style="text-align: left;">GitHook/Secret</td>
<td style="text-align: left;">yes, if git SOT</td>
<td style="text-align: left;">secret for githook</td>
<td style="text-align: left;">none</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Server</td>
<td style="text-align: left;">SoT/Git/HookID</td>
<td style="text-align: left;">yes, if git SOT</td>
<td style="text-align: left;">git hookID</td>
<td style="text-align: left;">none</td>
</tr>
<tr class="even">
<td style="text-align: left;">Server</td>
<td style="text-align: left;">SoT/Git/ID</td>
<td style="text-align: left;">yes, if git SOT</td>
<td style="text-align: left;">ID (?)</td>
<td style="text-align: left;">none</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Server</td>
<td style="text-align: left;">SoT/Git/Branch</td>
<td style="text-align: left;">yes, if git SOT</td>
<td style="text-align: left;">SoT branch name</td>
<td style="text-align: left;">none</td>
</tr>
<tr class="even">
<td style="text-align: left;">Server</td>
<td style="text-align: left;">SoT/Local/ID</td>
<td style="text-align: left;">yes, if local dir</td>
<td style="text-align: left;">local dir ID</td>
<td style="text-align: left;">none</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Server</td>
<td style="text-align: left;">SoT/Local/Root</td>
<td style="text-align: left;">yes, if local dir</td>
<td style="text-align: left;">local root dir</td>
<td style="text-align: left;">none</td>
</tr>
<tr class="even">
<td style="text-align: left;">Server</td>
<td style="text-align: left;">LocalDir/PollInterval</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">number of seconds between checks to that directory for updates</td>
<td style="text-align: left;">10</td>
</tr>
</tbody>
</table>
<h2 id="key-generation">key generation</h2>
<p>The Vaquero Server and Vaquero Agents communicate over HTTPS/TLS. The Vaquero Server requires a public/private keypair to start up. You may either use the provided sample keys (<a href="https://raw.githubusercontent.com/CiscoCloud/vaquero-vagrant/master/provision_files/server.pem">public</a>, <a href="https://raw.githubusercontent.com/CiscoCloud/vaquero-vagrant/master/provision_files/server.key">private</a>), or generate your own using the following commands:</p>
<pre><code>openssl genrsa -out server.key 2048
openssl ecparam -genkey -name secp384r1 -out server.key
openssl req -new -x509 -sha256 -key server.key -out server.pem -days 3650</code></pre>
<p>The configuration file for the server would include the following:</p>
<pre><code>ServerAPI:
   PrivateKey: &quot;path/to/server.key&quot;
   PublicKey: &quot;path/to/server.pem&quot;</code></pre>
<p>Alternatively, the <code>--server-private-key</code> and <code>--server-public-key</code> flags can be passed on the command line.</p>
<p>In a dev environment, a self signed key should sufficient, but in a production environment we highly suggest the keys be signed by a certificate authority. By default, Vaquero will not accept self-signed keys. To run insecurely, the agent config would need to include the following:</p>
<pre><code>ServerClient:
   InsecureSkipVerify: true</code></pre>
<p>Alternatively, the <code>-k</code> flag can be passed on the command line.</p>
<h2 id="secrets">secrets</h2>
<p>The Vaquero APIs authenticate via JWT tokens. These require a server-secret and a shared-secret to be exported on the server and shared-secret and site-id must be exported on the agents. This can be done via the environment or command line:</p>
<h3 id="environment">environment</h3>
<p>Server:</p>
<pre><code>export VAQUERO_SHARED_SECRET=&quot;HighlySecureSharedSecret&quot;
export VAQUERO_SERVER_SECRET=&quot;SHHHHHHHDONTTELLANYONE&quot;</code></pre>
<p>Agent:</p>
<pre><code>export VAQUERO_SHARED_SECRET=&quot;HighlySecureSharedSecret&quot;
export VAQUERO_SITE_ID=&quot;test-site&quot;</code></pre>
<p>If exported in the environment, make sure to run sudo with the <code>-E</code> flag when running vaquero. <code>sudo -E vaquero ...</code></p>
<h3 id="command-line">command line</h3>
<p><code>vaquero server --shared-secret HighlySecureSharedSecret --server-secret SHHHHHHHDONTTELLANYONE</code></p>
<p><code>vaquero agent --site-id test-site --shared-secret HighlySecureSharedSecret</code></p>
<h2 id="running-vaquero-from-the-container">Running Vaquero from the container</h2>
<p><a href="https://bintray.com/shippedrepos/vaquero/vaquero%3Avaquero">Bintray Docker Images</a></p>
<ol type="1">
<li>Fetch the image: <code>docker pull shippedrepos-docker-vaquero.bintray.io/vaquero/vaquero:latest</code></li>
<li><p>Run the example: <code>docker run -v /vagrant/config/git-sot.yaml:/vaquero/config.yaml -v /var/vaquero/files:/var/vaquero/files -v /vagrant/provision_files/secret:/vaquero/secret --net=&quot;host&quot; -e VAQUERO_SHARED_SECRET=&quot;&lt;secret&gt;&quot; -e VAQUERO_SERVER_SECRET=&quot;&lt;secret&gt;&quot; -e VAQUERO_SITE_ID=&quot;test-site&quot; -e VAQUERO_AGENT_ID=&quot;test-agent&quot; shippedrepos-docker-vaquero.bintray.io/vaquero/vaquero:latest standalone --config /vaquero/config.yaml</code></p>
<ol type="1">
<li><code>docker volume</code> to pass the configuration into the container.</li>
<li><code>docker volume</code> to pass in the assetServer assets (kernel images, <code>undionly.kpxe</code>, etc)</li>
<li>set networking to <code>host</code></li>
<li>ENV vars needed by vaquero</li>
</ol></li>
</ol>
<h2 id="vaquero-with-systemd">Vaquero with Systemd</h2>
<p>Vaquero can be started as a service using Systemd and Docker.</p>
<p><strong><code>/etc/systemd/system/vaquero.service</code></strong></p>
<hr />
<pre><code>[Unit]
Description=Vaquero Container
Requires=docker.service
After=docker.service

[Service]
Restart=always
RestartSec=2
ExecStartPre=-/usr/bin/docker kill vaquero
ExecStartPre=-/usr/bin/docker rm -f vaquero
ExecStartPre=/usr/bin/docker pull shippedrepos-docker-vaquero.bintray.io/vaquero/vaquero:v0.11.0
ExecStart=/usr/bin/docker run \
--network=host \
-v /home/bosco/vaquero:/vaquero \
-e VAQUERO_SERVER_SECRET=bosco \
-e VAQUERO_SHARED_SECRET=bosco \
-e VAQUERO_SITE_ID=bosco \
-e VAQUERO_AGENT_ID=bosco \
--name vaquero shippedrepos-docker-vaquero.bintray.io/vaquero/vaquero:v0.11.0 standalone \
--config /vaquero/local.yml
ExecStop=/usr/bin/docker stop vaquero

[Install]
WantedBy=default.target</code></pre>
<hr />
<p>This example:</p>
<ol type="1">
<li>Starts a Docker container named <code>vaquero</code> after the Docker service has started.</li>
<li>It starts using the parameters passed into <code>ExecStart</code></li>
<li><code>ExecStop</code> stops the <code>vaquero</code> container and is run when stopping the service.</li>
<li><code>ExecStopPost</code> removes the <code>vaquero</code> container and is run after stopping the service.</li>
<li>It tries to restart the service.</li>
</ol>
<p>Tips:</p>
<ol type="1">
<li>Make sure the Docker service is enabled on startup <code>sudo systemctl enable docker</code></li>
<li>Check that the <code>vaquero</code> service isn’t dying <code>sudo systemctl status vaquero</code></li>
<li>See if the Docker container exists <code>sudo docker ps</code></li>
<li>Flush the changes <code>sudo systemctl daemon-reload</code></li>
<li>Restart both the <code>docker</code> and the <code>vaquero</code> services <code>sudo systemctl restart docker</code></li>
<li>Make sure that pathing is correct for config and files required</li>
</ol>
<h2 id="sending-webhooks-to-vaquero-master">Sending Webhooks to Vaquero Master</h2>
<ol type="1">
<li>Install <a href="https://ngrok.com/">ngrok</a> to your local machine, unzip the package, and move the executable to <code>/usr/local/bin</code>.</li>
<li>Run ngrok on your physical machine <code>ngrok http 127.0.0.1:4816</code> or <code>ngrok http 4816</code>.
<ol type="1">
<li>Make sure that the address and port are the same as the Git Hook server in the config.</li>
<li>It should follow <code>ngrok http &lt;Gitter.Addr&gt;:&lt;Gitter.Port&gt;</code></li>
</ol></li>
<li>Create a testing repo to launch webhooks from.</li>
<li>Give github.com the http endpoint provided by ngrok <code>http://0000ffff.ngrok.io/postreceive/vaquero-local</code>.
<ol type="1">
<li>This should be something like <code>&lt;ngrok address&gt;/&lt;Gitter.Endpoint&gt;/&lt;GitHook.ID&gt;</code>.</li>
<li>The <code>Gitter.Endpoint</code> and the <code>GitHook.ID</code> are from the config.</li>
</ol></li>
<li>Launch a webhook to hit the ngrok address.
<ol type="1">
<li>The <code>GitHook.Username</code>,<code>GitHook.Password</code>, and <code>GitHook.Secret</code> should be set in configuration to connect to the webhook of the <code>GitHook.URL</code>.</li>
<li>Note that the <code>GitHook.Secret</code> can be left blank and should correspond to the Secret created when setting up the webhook on GitHub.</li>
<li>Pushing to the repo, or <code>Redeliver Payload</code> on GitHub will launch a webhook.</li>
</ol></li>
</ol>
<h2 id="build-the-docs">Build the Docs</h2>
<p>By running <code>godoc -http &lt;port&gt;</code> and open <code>localhost:&lt;port&gt;</code> on your web browser</p>
<h2 id="swagger">Swagger</h2>
<p>The User API has a <a href="http://swagger.io/tools/">Swagger</a> document for ease of use. It can be used to generate code, or explore the exposed endpoints.</p>
<p>The interface can either be setup by following the instructions for the <a href="http://swagger.io/swagger-ui/">Swagger UI</a> and serving the <code>swagUserAPI.yaml</code> file locally, or by going to the <a href="http://petstore.swagger.io/">Swagger UI demo</a> and inputting the <a href="http://rawgit.com">RawGit</a> hosted CORS-supported <code>https://cdn.rawgit.com/CiscoCloud/vaquero-docs/master/swagUserAPI.yaml</code>.</p>
<p>Additionally, the <a href="http://swagger.io/swagger-codegen/">Swagger Codegen</a> can generate client side code for interacting with the provided endpoints.</p>
<h2 id="questions-comments-feedback">Questions / Comments / Feedback</h2>
<p>To provide feedback to the team please email: <a href="mailto:vaquero-feedback@external.cisco.com">vaquero-feedback@external.cisco.com</a> For Issues, open at <a href="https://github.com/CiscoCloud/vaquero-docs/issues">CiscoCloud/vaquero-docs</a></p>
<div>
<p style="font-size:12px">
Logo created with: http://logomakr.com
</p>
</div>
